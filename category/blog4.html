<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>      Alex Raichev > Blog
 > Blog
</title>
  <link rel="icon" type="image/x-icon" href="https://raichev.net/theme/images/favicon.ico" />
  <link href="https://raichev.net/theme/css/pygment.css" rel="stylesheet" type="text/css" media="screen" />
  <link rel="stylesheet" type="text/css" href="https://raichev.net/theme/fonts/medium-fonts.css" />
  <link href="https://raichev.net/theme/css/style.css" rel="stylesheet" type="text/css" media="screen" />
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  <link href="https://raichev.net/" type="application/atom+xml" rel="alternate" title="Alex Raichev ATOM Feed" />
<!-- Using MathJax, with the delimiters $ -->
<!-- Conflict with pygments for the .mo and .mi -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
    "HTML-CSS": {
    styles: {
    ".MathJax .mo, .MathJax .mi": {color: "black ! important"}}
    },
    // tex2jax: {inlineMath: [['%','$'], ['\\(','\\)']],processEscapes: true}
    tex2jax: {inlineMath: [['\\(','\\)']],processEscapes: true}
    });
    MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function () {
    var VARIANT = MathJax.OutputJax["HTML-CSS"].FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
    MathJax.Hub.Register.StartupHook("SVG Jax Ready",function () {
    var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;
    VARIANT["normal"].fonts.unshift("MathJax_SansSerif");
    VARIANT["bold"].fonts.unshift("MathJax_SansSerif-bold");
    VARIANT["italic"].fonts.unshift("MathJax_SansSerif-italic");
    VARIANT["-tex-mathit"].fonts.unshift("MathJax_SansSerif-italic");
    });
</script>

<script type="text/javascript" async
  src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script></head>
<body>
    <header>
      <h1>Alex Raichev</h1>
<!--       <span><img id="flare" src="https://raichev.net/theme/images/frucht.svg"></span>
 -->
      <span id="graph"></span>
    </header>

    <nav>
<ul>
          <li><a href="/index.html"
>Welcome</a></li>
<li>&middot;<li>          <li><a href="/pages/works.html"
>Works</a></li>
<li>&middot;<li>          <li><a href="/blog.html"
              class="active"
>Blog</a></li>
<li>&middot;<li>          <li><a href="/archives.html"
>Blogindex</a></li>
      </ul>
    </nav>

    <div id="mainContent">
    <div class="blogItem">
      <h1><a href="https://raichev.net/i-knew-a-woman.html">I Knew a Woman</a></h1>
      <div class="line-block">
<div class="line">I knew a woman, lovely in her bones,</div>
<div class="line">When small birds sighed, she would sigh back at them;</div>
<div class="line">Ah, when she moved, she moved more ways than one:</div>
<div class="line">The shapes a bright container can contain!</div>
<div class="line">Of her choice virtues only gods should speak,</div>
<div class="line">Or English poets who grew up on Greek</div>
<div class="line">(I’d have them sing in chorus, cheek to cheek).</div>
<div class="line"><br /></div>
<div class="line">How well her wishes went! She stroked my chin,</div>
<div class="line">She taught me Turn, and Counter-turn, and Stand;</div>
<div class="line">She taught me Touch, that undulant white skin;</div>
<div class="line">I nibbled meekly from her proffered hand;</div>
<div class="line">She was the sickle; I, poor I, the rake,</div>
<div class="line">Coming behind her for her pretty sake</div>
<div class="line">(But what prodigious mowing we did make).</div>
<div class="line"><br /></div>
<div class="line">Love likes a gander, and adores a goose:</div>
<div class="line">Her full lips pursed, the errant note to seize;</div>
<div class="line">She played it quick, she played it light and loose;</div>
<div class="line">My eyes, they dazzled at her flowing knees;</div>
<div class="line">Her several parts could keep a pure repose,</div>
<div class="line">Or one hip quiver with a mobile nose</div>
<div class="line">(She moved in circles, and those circles moved).</div>
<div class="line"><br /></div>
<div class="line">Let seed be grass, and grass turn into hay:</div>
<div class="line">I’m martyr to a motion not my own;</div>
<div class="line">What’s freedom for? To know eternity.</div>
<div class="line">I swear she cast a shadow white as stone.</div>
<div class="line">But who would count eternity in days?</div>
<div class="line">These old bones live to learn her wanton ways:</div>
<div class="line">(I measure time by how a body sways).</div>
<div class="line"><br /></div>
<div class="line">~ Theodore Roethke, 1954</div>
</div>
<p>What a sweet poem!
<a class="reference external" href="https://raichev.net/files/i_knew_a_woman.mp3">Here's</a> my musical setting for (part of) it.</p>


      <div class="blogMeta">
        Author: Alex Raichev<br>
        Date: 2018-09-10<br>
          Tags:
            <a href="https://raichev.net/tag/poetry.html">
            poetry</a>,             <a href="https://raichev.net/tag/roethke.html">
            Roethke</a><br />
        <a href="https://raichev.net/i-knew-a-woman.html">Permalink</a>,
        <a href="mailto:alex@raichev.net?subject=comment on https://raichev.net/i-knew-a-woman.html">Comment</a>
      </div>
    </div>
    <div class="blogItem">
      <h1><a href="https://raichev.net/the-event.html">The Event</a></h1>
      <img alt="" class="photo" src="https://raichev.net/files/the_event.png" />
<p>Sourced from <a class="reference external" href="http://smbc-comics.com/comic/the-event">Saturday Morning Breakfast Cereal</a>.</p>


      <div class="blogMeta">
        Author: Alex Raichev<br>
        Date: 2018-08-19<br>
          Tags:
            <a href="https://raichev.net/tag/comic.html">
            comic</a><br />
        <a href="https://raichev.net/the-event.html">Permalink</a>,
        <a href="mailto:alex@raichev.net?subject=comment on https://raichev.net/the-event.html">Comment</a>
      </div>
    </div>
    <div class="blogItem">
      <h1><a href="https://raichev.net/deploying-a-flask-application-on-webfaction.html">Deploying a Flask Application on Webfaction</a></h1>
      <p>A few months ago i had to deploy for the first time a Flask application on a Webfaction server.
After studying <a class="reference external" href="https://community.webfaction.com/questions/12718/installing-flask?page=1&amp;focusedAnswerId=12719#12719">this Webfaciton Community thread</a> on the topic, issuing a Webfaction support ticket for help ---Webfaction customer service is excellent--- and trying and failing several times, i figured it out.
Here's what i did.</p>
<p>Suppose that your Flask project structure looks like this:</p>
<pre class="literal-block">
APPNAME
├── APPNAME
│&nbsp;&nbsp; ├── main.py
│&nbsp;&nbsp; ...
│&nbsp;&nbsp; └── wsgi.py
...
├── Pipfile
├── Pipfile.lock
└── README.rst
</pre>
<p>that you are tracking it with Git, that you run it locally in a Python virtual environment, e.g. using Pipenv, and that it works.
Now, let's deploy it to Webfaction.</p>
<ol class="arabic">
<li><p class="first">Log in to your Webfaction control panel and create a new mod_wsgi/Python application. Also create a corresponding domain and website for the app. I assume you know how to do that.</p>
</li>
<li><p class="first">Throughout the remainder of these notes, suppose that your Webfaction username is USERNAME and that your Flask application is called APPNAME</p>
</li>
<li><p class="first">SSH into your Webfaction server and run these commands:</p>
<pre class="literal-block">
&gt; mkdir home/USERNAME/webapps/APPNAME/APPNAME
&gt; rm -r home/USERNAME/webapps/APPNAME/htdocs
&gt; rm -r home/USERNAME/webapps/APPNAME/lib
</pre>
<p>You don't need the <tt class="docutils literal">lib</tt> directory in the last line, because you will be using a virtual environment.</p>
</li>
<li><p class="first">Set up Git, Git hooks, and push your local repository to Webfaction. See the Webfaction instructions <a class="reference external" href="https://docs.webfaction.com/software/git.html">here</a> and <a class="reference external" href="https://community.webfaction.com/questions/1246/using-git-with-applications">here</a>.</p>
</li>
<li><p class="first">Create your virtual environment ---let's call it VENVNAME here--- and install your app requirements. I think the easiest way to do this is to install Pip to install Pipenv to manage your virtual environments and packages.</p>
</li>
<li><p class="first">If your local repo has a <tt class="docutils literal">.env</tt> environment file containing (Git-ignored) secrets, then create a corresponding <tt class="docutils literal">.env</tt> file in your Webfaction repo.</p>
</li>
<li><p class="first">If you haven't done so already, create the file <tt class="docutils literal">home/USERNAME/webapps/APPNAME/APPNAME/wsgi.py</tt> containing the single line <tt class="docutils literal">from main import server as application</tt>.</p>
<p>This assumes that your Flask code lies in the module <tt class="docutils literal">main.py</tt> and that the Flask app you create in that module is call <tt class="docutils literal">server</tt>.
If that's not the case, then change the above snippet as needed.</p>
</li>
<li><p class="first">Edit the file <tt class="docutils literal">home/USERNAME/webapps/APPNAME/apache2/conf/httpd.conf</tt> to the following, where PORT is the port number that Webfaction assigned to your application (which you can view in your Webfaction control panel for the app):</p>
<pre class="literal-block">
ServerRoot &quot;/home/USERNAME/webapps/APPNAME/apache2&quot;

LoadModule authz_core_module modules/mod_authz_core.so
LoadModule dir_module        modules/mod_dir.so
LoadModule env_module        modules/mod_env.so
LoadModule log_config_module modules/mod_log_config.so
LoadModule mime_module       modules/mod_mime.so
LoadModule rewrite_module    modules/mod_rewrite.so
LoadModule setenvif_module   modules/mod_setenvif.so
LoadModule wsgi_module       modules/mod_wsgi.so
LoadModule unixd_module      modules/mod_unixd.so

LogFormat &quot;%{X-Forwarded-For}i %l %u %t \&quot;%r\&quot; %&gt;s %b \&quot;%{Referer}i\&quot; \&quot;%{User-Agent}i\&quot;&quot; combined
CustomLog /home/USERNAME/logs/user/access_APPNAME.log combined
ErrorLog /home/USERNAME/logs/user/error_APPNAME.log

Listen PORT
KeepAlive Off
SetEnvIf X-Forwarded-SSL on HTTPS=1
ServerLimit 1
StartServers 1
MaxRequestWorkers 5
MinSpareThreads 1
MaxSpareThreads 3
ThreadsPerChild 5

WSGIPythonHome /home/USERNAME/.virtualenvs/VENVNAME
WSGIDaemonProcess APPNAME processes=2 threads=12 python-path=/home/USERNAME/webapps/APPNAME/APPNAME:/home/USERNAME/webapps/APPNAME/APPNAME/APPNAME
WSGIScriptAlias / /home/USERNAME/webapps/APPNAME/APPNAME/APPNAME/wsgi.py
WSGIProcessGroup APPNAME
WSGIRestrictEmbedded On
WSGILazyInitialization On
</pre>
</li>
<li><p class="first">Restart your app via <tt class="docutils literal">home/USERNAME/webapps/APPNAME/apache2/bin/restart</tt>.</p>
</li>
</ol>
<p>These instructions will probably go obsolete in a few months, as all things web related do.
Still, they'll help me while they last and maybe help you too.</p>


      <div class="blogMeta">
        Author: Alex Raichev<br>
        Date: 2018-05-17<br>
          Tags:
            <a href="https://raichev.net/tag/instructions.html">
            instructions</a>,             <a href="https://raichev.net/tag/tech.html">
            tech</a><br />
        <a href="https://raichev.net/deploying-a-flask-application-on-webfaction.html">Permalink</a>,
        <a href="mailto:alex@raichev.net?subject=comment on https://raichev.net/deploying-a-flask-application-on-webfaction.html">Comment</a>
      </div>
    </div>
    <div class="blogItem">
      <h1><a href="https://raichev.net/kutere.html">Kūtere</a></h1>
      <img alt="youtube~O2KR8PXZ2Zo" class="video" src="''" />
<p>Kūtere - (Māori, verb) to flow together, rush into one place.
Made by my friend Kate.</p>
<p>Video sourced from YouTube <a class="reference external" href="https://www.youtube.com/watch?v=O2KR8PXZ2Zo">here</a>.</p>


      <div class="blogMeta">
        Author: Alex Raichev<br>
        Date: 2018-02-19<br>
          Tags:
            <a href="https://raichev.net/tag/video.html">
            video</a>,             <a href="https://raichev.net/tag/poi.html">
            poi</a><br />
        <a href="https://raichev.net/kutere.html">Permalink</a>,
        <a href="mailto:alex@raichev.net?subject=comment on https://raichev.net/kutere.html">Comment</a>
      </div>
    </div>
    <div class="blogItem">
      <h1><a href="https://raichev.net/take-a-street-and-build-a-community.html">Take a Street and Build a Community</a></h1>
      <img alt="youtube~C1WSkXWSJac" class="video" src="''" />
<p>Video sourced from YouTube <a class="reference external" href="https://www.youtube.com/watch?v=C1WSkXWSJac">here</a>.</p>


      <div class="blogMeta">
        Author: Alex Raichev<br>
        Date: 2018-01-04<br>
          Tags:
            <a href="https://raichev.net/tag/video.html">
            video</a>,             <a href="https://raichev.net/tag/resilience.html">
            resilience</a><br />
        <a href="https://raichev.net/take-a-street-and-build-a-community.html">Permalink</a>,
        <a href="mailto:alex@raichev.net?subject=comment on https://raichev.net/take-a-street-and-build-a-community.html">Comment</a>
      </div>
    </div>
    <div class="pagination">
    <ul>
        <li class="prev"><a href="
            https://raichev.net/category/blog3.html"
            >&laquo;</a></li>
        <li><a href="
            https://raichev.net/category/blog.html"
            class=""
            >1</a></li>
        <li><a href="
            https://raichev.net/category/blog2.html"
            class=""
            >2</a></li>
        <li><a href="
            https://raichev.net/category/blog3.html"
            class=""
            >3</a></li>
        <li><a href="
            https://raichev.net/category/blog4.html"
            class="active"
            >4</a></li>
        <li><a href="
            https://raichev.net/category/blog5.html"
            class=""
            >5</a></li>
        <li><a href="
            https://raichev.net/category/blog6.html"
            class=""
            >6</a></li>
        <li><a href="
            https://raichev.net/category/blog7.html"
            class=""
            >7</a></li>
        <li><a href="
            https://raichev.net/category/blog8.html"
            class=""
            >8</a></li>
        <li><a href="
            https://raichev.net/category/blog9.html"
            class=""
            >9</a></li>
        <li><a href="
            https://raichev.net/category/blog10.html"
            class=""
            >10</a></li>
        <li><a href="
            https://raichev.net/category/blog11.html"
            class=""
            >11</a></li>
        <li><a href="
            https://raichev.net/category/blog12.html"
            class=""
            >12</a></li>
        <li><a href="
            https://raichev.net/category/blog13.html"
            class=""
            >13</a></li>
        <li><a href="
            https://raichev.net/category/blog14.html"
            class=""
            >14</a></li>
        <li><a href="
            https://raichev.net/category/blog15.html"
            class=""
            >15</a></li>
        <li><a href="
            https://raichev.net/category/blog16.html"
            class=""
            >16</a></li>
        <li><a href="
            https://raichev.net/category/blog17.html"
            class=""
            >17</a></li>
        <li><a href="
            https://raichev.net/category/blog18.html"
            class=""
            >18</a></li>
        <li><a href="
            https://raichev.net/category/blog19.html"
            class=""
            >19</a></li>
        <li><a href="
            https://raichev.net/category/blog20.html"
            class=""
            >20</a></li>
        <li><a href="
            https://raichev.net/category/blog21.html"
            class=""
            >21</a></li>
        <li><a href="
            https://raichev.net/category/blog22.html"
            class=""
            >22</a></li>
        <li><a href="
            https://raichev.net/category/blog23.html"
            class=""
            >23</a></li>
        <li><a href="
            https://raichev.net/category/blog24.html"
            class=""
            >24</a></li>
        <li><a href="
            https://raichev.net/category/blog25.html"
            class=""
            >25</a></li>
        <li><a href="
            https://raichev.net/category/blog26.html"
            class=""
            >26</a></li>
        <li><a href="
            https://raichev.net/category/blog27.html"
            class=""
            >27</a></li>
        <li class="next"><a href="
            https://raichev.net/category/blog5.html"
            >&raquo;</a></li>
    </ul>
    </div>

  <br><br>
  <p><b>Why no comments?</b>
  I used to do public comments but found that moderating and maintaining them took too much time in front of the computer, time better spent playing outdoors.
  So these days I only do private comments, that is, you can email me comments regarding a post by clicking the 'Comment' link at the bottom of the post.
  </p>

    </div>

    <div class="clearfloat"></div>

    <div id="footer">
      <p>Powered by <a href="https://blog.getpelican.com/">Pelican</a>
    </div>

  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="/js/graph.js"></script>
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  <script src="/js/video.js"></script>


</body>
</html>